<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <title>Karnataka Quarantined People</title>
        <link rel="stylesheet" type="text/css" href="styles.css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                $('#pincode').on('keypress', function(e) {
                    if (e.which === 13) {
                        var caseMatchingPin = [];
                        var pinCode = $('#pincode').val();

                        $('#matchingCases').empty();
                        $('#loader').show();
                        $.getJSON('https://karnataka-covid19-cases.firebaseio.com/quarantine.json', function(data) {
                            $('#loader').hide();
                            $.each(data, function(k, person) {
                                if (person.pin == pinCode) {
                                    caseMatchingPin.push('<tr><td>' + 
                                    person.arrival + '<span>Person Arrival</span></td><td>' + 
                                    person.quarantinedTill + '<span>Quarantined Till</span></td><td>' +
                                    person.houseNo + '<span>House No.</span></td><td>' +
                                    person.street + '<span>Street</span></td><td>' +
                                    person.tehsil + '<span>Area</span></td><td>' +
                                    person.district + '<span>District</span></td></tr>');
                                }
                            });
                            var tableHeaders = '<thead><tr><th>Person Arrival</th><th>Quarantined Till</th><th>House No.</th><th>Street</th><th>Tehsil</th><th>District</th></tr></thead>'

                            if (caseMatchingPin.length > 0) {
                                $('#matchingCases').append('<table>' + tableHeaders + caseMatchingPin + '</table>');
                            }
                        });
                    }
                });
            });
        </script> 
    </head>
    <body>
        <div class="header">
            <p>KARNATAKA COVID-19 TRACKER</p>
        </div>
        <div id="content">
            <div id="field">
                <label>PINCODE</label>
                <input id="pincode" type="text" placeholder="e.g 560085" class="sys-font"/>
                <div id="loader"></div>
            </div>
            <div id="matchingCases"></div>
        </div>
        <div class="footer"> <a class="link" href="http://supr.design">Brought to you by - Suprâ€¢Design</a></div>

    </body>
</html>